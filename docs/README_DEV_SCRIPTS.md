# å¼€å‘ç¯å¢ƒè„šæœ¬ä½¿ç”¨æŒ‡å—

æœ¬é¡¹ç›®æä¾›äº†ä¸¤ä¸ªå¼€å‘ç¯å¢ƒè„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨åŒ–å¼€å‘ç¯å¢ƒçš„è®¾ç½®ã€æ£€æµ‹å’Œç®¡ç†ã€‚

## è„šæœ¬æ¦‚è§ˆ

### 1. `check_dev_env.py` - Pythonç¯å¢ƒæ£€æµ‹è„šæœ¬

åŠŸèƒ½å¼ºå¤§çš„Pythonç¯å¢ƒæ£€æµ‹å·¥å…·ï¼Œæä¾›è¯¦ç»†çš„ç¯å¢ƒåˆ†ææŠ¥å‘Šã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**
- âœ… Pythonç‰ˆæœ¬æ£€æŸ¥
- âœ… è™šæ‹Ÿç¯å¢ƒçŠ¶æ€æ£€æµ‹
- âœ… ä¾èµ–åŒ…ç‰ˆæœ¬æ£€æŸ¥
- âœ… GPUæ”¯æŒæ£€æµ‹
- âœ… æ¨¡å‹æ–‡ä»¶æ£€æŸ¥
- âœ… æ¨¡å—å¯¼å…¥æµ‹è¯•
- âœ… ç”Ÿæˆè¯¦ç»†çš„JSONæŠ¥å‘Š

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# è¿è¡Œç¯å¢ƒæ£€æµ‹
python check_dev_env.py

# æˆ–è€…ç›´æ¥æ‰§è¡Œ
./check_dev_env.py
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
å¼€å‘ç¯å¢ƒæ£€æµ‹è„šæœ¬
é¡¹ç›®: äººä½“è¡Œä¸ºæ£€æµ‹ç³»ç»Ÿ

============================================================
                        Pythonç‰ˆæœ¬æ£€æŸ¥
============================================================

[INFO] å½“å‰Pythonç‰ˆæœ¬: 3.10.13
[INFO] è¦æ±‚Pythonç‰ˆæœ¬: >= 3.10.13
[SUCCESS] Pythonç‰ˆæœ¬ç¬¦åˆè¦æ±‚

============================================================
                         ä¾èµ–åŒ…æ£€æŸ¥
============================================================

[INFO] æ£€æŸ¥å…³é”®ä¾èµ–åŒ…:
------------------------------------------------------------
âœ“ torch               2.2.2           (>= any)
âœ“ ultralytics         8.1.34          (>= any)
âœ— torchaudio          æœªå®‰è£…           (éœ€è¦ any)
------------------------------------------------------------
```

### 2. `start_dev.sh` - å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬

ä¸€ç«™å¼å¼€å‘ç¯å¢ƒç®¡ç†å·¥å…·ï¼Œé›†æˆç¯å¢ƒæ£€æµ‹ã€ä¾èµ–å®‰è£…å’ŒæœåŠ¡å¯åŠ¨ã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**
- ğŸ”§ è‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
- ğŸ“‹ Pythonç‰ˆæœ¬éªŒè¯
- ğŸ“¦ è‡ªåŠ¨å®‰è£…ç¼ºå¤±ä¾èµ–
- ğŸš€ å¯åŠ¨åç«¯å’Œå‰ç«¯æœåŠ¡
- ğŸ“Š æœåŠ¡çŠ¶æ€ç›‘æ§
- ğŸ›‘ æœåŠ¡åœæ­¢å’Œé‡å¯

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰
./start_dev.sh
./start_dev.sh start

# ä»…æ£€æµ‹ç¯å¢ƒ
./start_dev.sh check

# ä»…å®‰è£…ä¾èµ–
./start_dev.sh install

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./start_dev.sh status

# åœæ­¢æ‰€æœ‰æœåŠ¡
./start_dev.sh stop

# é‡å¯æ‰€æœ‰æœåŠ¡
./start_dev.sh restart

# æ˜¾ç¤ºå¸®åŠ©
./start_dev.sh help
```

## è¯¦ç»†åŠŸèƒ½è¯´æ˜

### ç¯å¢ƒæ£€æµ‹åŠŸèƒ½

#### Pythonç‰ˆæœ¬æ£€æŸ¥
- æ£€æŸ¥å½“å‰Pythonç‰ˆæœ¬æ˜¯å¦ç¬¦åˆé¡¹ç›®è¦æ±‚
- ä»`.python-version`æˆ–`pyproject.toml`è¯»å–ç‰ˆæœ¬è¦æ±‚
- æ˜¾ç¤ºPythonå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„å’Œç³»ç»Ÿè·¯å¾„

#### è™šæ‹Ÿç¯å¢ƒæ£€æµ‹
- è‡ªåŠ¨æ£€æµ‹æ˜¯å¦åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡Œ
- æŸ¥æ‰¾é¡¹ç›®ç›®å½•ä¸‹çš„è™šæ‹Ÿç¯å¢ƒï¼ˆvenvã€.venvã€envã€.envï¼‰
- æä¾›è™šæ‹Ÿç¯å¢ƒæ¿€æ´»å‘½ä»¤

#### ä¾èµ–åŒ…æ£€æŸ¥
- è§£æ`requirements.txt`å’Œ`requirements.dev.txt`
- æ£€æŸ¥å…³é”®ä¾èµ–åŒ…çš„å®‰è£…çŠ¶æ€å’Œç‰ˆæœ¬
- è¯†åˆ«ç¼ºå¤±å’Œè¿‡æ—¶çš„åŒ…
- æä¾›å®‰è£…å’Œæ›´æ–°å‘½ä»¤

#### GPUæ”¯æŒæ£€æµ‹
- æ£€æŸ¥PyTorchçš„CUDAæ”¯æŒ
- æ˜¾ç¤ºGPUè®¾å¤‡ä¿¡æ¯
- æä¾›CPU/GPUè¿è¡Œå»ºè®®

#### æ¨¡å‹æ–‡ä»¶æ£€æŸ¥
- æ£€æŸ¥è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- æ˜¾ç¤ºæ¨¡å‹æ–‡ä»¶å¤§å°
- è¯†åˆ«ç¼ºå¤±çš„æ¨¡å‹æ–‡ä»¶

#### æ¨¡å—å¯¼å…¥æµ‹è¯•
- æµ‹è¯•å…³é”®æ¨¡å—çš„å¯¼å…¥çŠ¶æ€
- è®¡ç®—å¯¼å…¥æˆåŠŸç‡
- è¯†åˆ«å¯¼å…¥é”™è¯¯

### æœåŠ¡ç®¡ç†åŠŸèƒ½

#### åç«¯æœåŠ¡
- è‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ¨¡å‹è·¯å¾„ã€è®¾å¤‡é…ç½®ç­‰ï¼‰
- æ£€æµ‹ç«¯å£å ç”¨æƒ…å†µ
- åå°å¯åŠ¨FastAPIæœåŠ¡
- æä¾›APIæ–‡æ¡£è®¿é—®åœ°å€

#### å‰ç«¯æœåŠ¡
- å¯åŠ¨é™æ€æ–‡ä»¶æœåŠ¡å™¨
- è‡ªåŠ¨å¤„ç†ç«¯å£å†²çª
- æä¾›å‰ç«¯è®¿é—®åœ°å€

#### æœåŠ¡ç›‘æ§
- å®æ—¶æ£€æŸ¥æœåŠ¡è¿è¡ŒçŠ¶æ€
- è®°å½•è¿›ç¨‹IDåˆ°æ–‡ä»¶
- æä¾›æ—¥å¿—æ–‡ä»¶è·¯å¾„
- æ”¯æŒä¼˜é›…åœæ­¢å’Œå¼ºåˆ¶ç»ˆæ­¢

## é…ç½®æ–‡ä»¶è¯´æ˜

### é¡¹ç›®é…ç½®æ–‡ä»¶

1. **`.python-version`** - Pythonç‰ˆæœ¬è¦æ±‚
   ```
   3.10.13
   ```

2. **`requirements.txt`** - ç”Ÿäº§ç¯å¢ƒä¾èµ–
   ```
   torch>=2.0.0
   ultralytics>=8.0.0
   fastapi>=0.100.0
   ...
   ```

3. **`requirements.dev.txt`** - å¼€å‘ç¯å¢ƒä¾èµ–
   ```
   black
   pytest
   flake8
   ...
   ```

4. **`pyproject.toml`** - é¡¹ç›®å…ƒæ•°æ®å’Œæ„å»ºé…ç½®
   ```toml
   [project]
   name = "human-behavior-detection"
   requires-python = ">=3.8"
   dependencies = [...]
   ```

### ç”Ÿæˆçš„æ–‡ä»¶

1. **`dev_env_report.json`** - ç¯å¢ƒæ£€æµ‹æŠ¥å‘Š
   ```json
   {
     "timestamp": "2024-01-01 12:00:00",
     "python_version": {
       "current": "3.10.13",
       "required": "3.10.13",
       "ok": true
     },
     "dependencies": {
       "satisfied": [...],
       "missing": [...],
       "outdated": [...]
     },
     "overall_status": true
   }
   ```

2. **`backend.pid`** - åç«¯æœåŠ¡è¿›ç¨‹ID
3. **`frontend.pid`** - å‰ç«¯æœåŠ¡è¿›ç¨‹ID
4. **`backend.log`** - åç«¯æœåŠ¡æ—¥å¿—
5. **`frontend.log`** - å‰ç«¯æœåŠ¡æ—¥å¿—

## ç¯å¢ƒå˜é‡é…ç½®

è„šæœ¬ä¼šè‡ªåŠ¨è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```bash
export HAIRNET_MODEL_PATH="models/hairnet_detection/models/hairnet_detection/hairnet_detection.pt"
export HAIRNET_DEVICE="cpu"
export HAIRNET_CONF_THRES="0.5"
export HAIRNET_IOU_THRES="0.4"
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Pythonç‰ˆæœ¬ä¸ç¬¦åˆè¦æ±‚**
   ```bash
   # ä½¿ç”¨pyenvå®‰è£…æŒ‡å®šç‰ˆæœ¬
   pyenv install 3.10.13
   pyenv local 3.10.13
   ```

2. **è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå¤±è´¥**
   ```bash
   # æ‰‹åŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
   python3 -m venv venv
   source venv/bin/activate
   ```

3. **ä¾èµ–å®‰è£…å¤±è´¥**
   ```bash
   # å‡çº§pip
   python -m pip install --upgrade pip

   # åˆ†åˆ«å®‰è£…ä¾èµ–
   pip install torch torchvision
   pip install ultralytics
   pip install -r requirements.txt
   ```

4. **ç«¯å£è¢«å ç”¨**
   ```bash
   # æŸ¥çœ‹ç«¯å£å ç”¨
   lsof -i :8000
   lsof -i :8080

   # ç»ˆæ­¢è¿›ç¨‹
   kill -9 <PID>
   ```

5. **æ¨¡å‹æ–‡ä»¶ç¼ºå¤±**
   ```bash
   # ä¸‹è½½YOLOv8æ¨¡å‹
   wget https://github.com/ultralytics/assets/releases/download/v0.0.0/models/yolo/yolov8n.pt

   # æˆ–è¿è¡Œè®­ç»ƒè„šæœ¬
   python scripts/train_hairnet_model.py
   ```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f backend.log

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
tail -f frontend.log

# æŸ¥çœ‹ç¯å¢ƒæŠ¥å‘Š
cat dev_env_report.json | python -m json.tool
```

## æœ€ä½³å®è·µ

1. **é¦–æ¬¡ä½¿ç”¨**
   ```bash
   # 1. æ£€æµ‹ç¯å¢ƒ
   ./start_dev.sh check

   # 2. å®‰è£…ä¾èµ–
   ./start_dev.sh install

   # 3. å¯åŠ¨æœåŠ¡
   ./start_dev.sh start
   ```

2. **æ—¥å¸¸å¼€å‘**
   ```bash
   # å¯åŠ¨å¼€å‘ç¯å¢ƒ
   ./start_dev.sh

   # å¼€å‘å®Œæˆååœæ­¢æœåŠ¡
   ./start_dev.sh stop
   ```

3. **é—®é¢˜è°ƒè¯•**
   ```bash
   # æ£€æŸ¥ç¯å¢ƒçŠ¶æ€
   ./start_dev.sh status

   # é‡æ–°æ£€æµ‹ç¯å¢ƒ
   python check_dev_env.py

   # é‡å¯æœåŠ¡
   ./start_dev.sh restart
   ```

## è„šæœ¬ç‰¹æ€§

### å®‰å…¨ç‰¹æ€§
- ğŸ”’ æ£€æŸ¥å‘½ä»¤æ‰§è¡Œæƒé™
- ğŸ›¡ï¸ ä¼˜é›…å¤„ç†è¿›ç¨‹ç»ˆæ­¢
- ğŸ“ è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•
- âš ï¸ ç”¨æˆ·ç¡®è®¤é‡è¦æ“ä½œ

### ç”¨æˆ·ä½“éªŒ
- ğŸ¨ å½©è‰²è¾“å‡ºå’Œæ¸…æ™°çš„çŠ¶æ€æŒ‡ç¤º
- ğŸ“Š è¿›åº¦æ˜¾ç¤ºå’Œè¯¦ç»†åé¦ˆ
- ğŸ”„ è‡ªåŠ¨é‡è¯•å’Œé”™è¯¯æ¢å¤
- ğŸ“– å®Œæ•´çš„å¸®åŠ©æ–‡æ¡£

### å…¼å®¹æ€§
- ğŸ æ”¯æŒmacOS
- ğŸ§ æ”¯æŒLinux
- ğŸ æ”¯æŒPython 3.8+
- ğŸ“¦ æ”¯æŒå¤šç§åŒ…ç®¡ç†å™¨

## è´¡çŒ®æŒ‡å—

å¦‚æœæ‚¨æƒ³æ”¹è¿›è¿™äº›è„šæœ¬ï¼Œè¯·ï¼š

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. åˆ›å»ºPull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚
